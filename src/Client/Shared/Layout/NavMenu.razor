@using Drogecode.Knrm.Oefenrooster.Client.Shared.Layout.Components;
<MudNavMenu>
    <MudNavLink Icon="@Icons.Material.Filled.Dashboard" Href="/" Match="NavLinkMatch.All">@L["Dashboard"]</MudNavLink>
    <MudNavLink Icon="@Icons.Material.Filled.CalendarMonth" Href="@_uriCalendar" Match="NavLinkMatch.Prefix">@L["Calendar"]</MudNavLink>
    <MudNavLink Icon="@Icons.Material.Filled.EditCalendar" Href="/planner/schedule" Match="NavLinkMatch.Prefix">@L["Schedule"]</MudNavLink>
    <MudNavLink Icon="@Icons.Material.Filled.Settings" Href="/configuration/global" Match="NavLinkMatch.Prefix">@L["Configuration"]</MudNavLink>
    <MudDivider />
    <MudNavLink Href="https://dorus1824.sharepoint.com/" Match="NavLinkMatch.All">@L["Sharepoint"]</MudNavLink>
    <MudDivider />
    @if (Navigation.ToBaseRelativePath(Navigation.Uri).StartsWith(_uriCalendar.Substring(1)))
    {
        <MudList>
            <MudListItem OnClick="AddTraining" Avatar="@Icons.Material.Filled.Add" Class="cursor-pointer">
                @L["Training"]
            </MudListItem>
        </MudList>
    }
</MudNavMenu>

@code {
    [Inject] private IStringLocalizer<NavMenu> L { get; set; } = default!;
    [Inject] NavigationManager Navigation { get; set; } = default!;
    [Inject] private IDialogService _dialogProvider { get; set; } = default!;

    private string _uriCalendar = "/planner/calendar";
    protected override void OnInitialized() => Navigation.LocationChanged += RefreshForSubMenu;
    private void RefreshForSubMenu(object sender, LocationChangedEventArgs e)
    {
        StateHasChanged();
    }
    private void AddTraining()
    {

        DialogOptions options = new DialogOptions() { MaxWidth = MaxWidth.Medium, FullWidth = true };
        _dialogProvider.Show<AddTrainingDialog>(L["Add training"], options);
    }
}