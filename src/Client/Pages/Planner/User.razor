@page "/planner/user"
@using Drogecode.Knrm.Oefenrooster.Client.Pages.Dashboard.Components
@attribute [Authorize(Roles = AccessesNames.AUTH_users_details)]

@if (_users != null && _functions != null)
{
    <MudPaper>
        <MudList Clickable="false">
            @foreach (var function in _functions.OrderBy(x => x.Order))
            {
                @if (_users.Any(x => x.UserFunctionId == function.Id))
                {
                    <MudText>@function.Name</MudText>
                    @foreach (var user in _users.Where(x => x.UserFunctionId == function.Id).OrderBy(x => x.Name))
                    {
                        <MudListItem OnClick="()=>ClickUser(user)">
                            <div class="flex space-x-4">
                                <div>@user.Name</div>
                            </div>
                        </MudListItem>
                    }
                }
            }
        </MudList>
    </MudPaper>
}
else
{
    <MudSkeleton />
    <MudSkeleton />
    <MudSkeleton />
    <MudSkeleton />
}