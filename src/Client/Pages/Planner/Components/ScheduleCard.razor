@using Drogecode.Knrm.Oefenrooster.Client.Pages.Components
@using Drogecode.Knrm.Oefenrooster.Client.Pages.Planner.Components
@using Drogecode.Knrm.Oefenrooster.Client.Repositories;
@using Drogecode.Knrm.Oefenrooster.Shared.Models.Schedule
@using Drogecode.Knrm.Oefenrooster.Shared.Enums;
<CalendarBaseCard ReplaceEmtyName="@ReplaceEmtyName" Width="@Width" Training="@Planner" OnClickCallback="OpenScheduleDialog" OnClickSettings="OpenConfigDialog" OnClickHistory="OpenHistoryDialog" ShowDate="@ShowDate" ContentClass="@(Planner.IsCreated ? "" : "DrogeCode-card-content-not-created")">
    @if (ChildContent != null)
    {
        @ChildContent
    }
    @if (Functions != null && Users != null)
    {
        <MudList>
            @foreach (var function in Functions.Where(x => x.Active).OrderBy(x => x.Order))
            {
                @if (Planner.PlanUsers?.Any(x => x.PlannedFunctionId == function.Id) == true)
                {
                    @foreach (var assignedUser in Planner.PlanUsers.Where(x => x.Assigned && x.PlannedFunctionId == function.Id))
                    {
                        <MudListItem>@assignedUser.Name@(assignedUser.PlannedFunctionId != assignedUser.UserFunctionId ? $" - {LApp["as"]} {function.Name}" : "")</MudListItem>
                    }
                }
            }
        </MudList>
    }
</CalendarBaseCard>