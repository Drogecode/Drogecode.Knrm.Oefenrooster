@*
<auto-generated>
This code was generated by Drogecode.Knrm.Oefenrooster.CodeGenerator.
If required, update the tool; not this file.

Changes to this file may cause incorrect behavior and will be lost if the code is regenerated.
</auto-generated>
*@

@page "/configuration/user-roles/edit/{Id:guid}"
@page "/configuration/user-roles/add/"
@if (_userRole?.Role is not null)
{
    <MudPaper Class="pa-4" MaxWidth="800px">
        @if (!_editName && !string.IsNullOrWhiteSpace(_userRole.Role.Name))
        {
            <MudText Typo="Typo.h5" Class="cursor-pointer" @onclick="() => _editName = true">@_userRole.Role.Name</MudText>
        }
        else
        {
            <MudTextField T="string?" @bind-Value="_userRole.Role.Name" Label="@L["Name"]"/>
        }
        <MudTextField T="string?" @bind-Value="_userRole.Role.ExternalId" Counter="@DefaultSettingsHelper.MAX_LENGTH_ROLE_EXTERNAL_ID" MaxLength="@DefaultSettingsHelper.MAX_LENGTH_ROLE_EXTERNAL_ID" Label="@L["ExternalId"]"/>
        <MudText Typo="Typo.h6">@L["Global"]</MudText>
        <MudSwitch Label="@L["basic_access"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_basic_access" ValueChanged="@(isChecked => { _userRole.Role.AUTH_basic_access = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["showCfooter"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_show_c_footer" ValueChanged="@(isChecked => { _userRole.Role.AUTH_show_c_footer = isChecked; _saved = null; })"/>
        <MudText Typo="Typo.h6">@L["Configuration"]</MudText>
        <MudSwitch Label="@L["configure_training-types"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_configure_training_types" ValueChanged="@(isChecked => { _userRole.Role.AUTH_configure_training_types = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["configure_user_roles"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_configure_user_roles" ValueChanged="@(isChecked => { _userRole.Role.AUTH_configure_user_roles = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["configure_user_functions"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_configure_user_functions" ValueChanged="@(isChecked => { _userRole.Role.AUTH_configure_user_functions = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["configure_default_schedule"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_configure_default_schedule" ValueChanged="@(isChecked => { _userRole.Role.AUTH_configure_default_schedule = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["configure_vehicles"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_configure_vehicles" ValueChanged="@(isChecked => { _userRole.Role.AUTH_configure_vehicles = isChecked; _saved = null; })"/>
        <MudText Typo="Typo.h6">@L["Scheduler"]</MudText>
        <MudSwitch Label="@L["scheduler"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_scheduler" ValueChanged="@(isChecked => { _userRole.Role.AUTH_scheduler = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["scheduler_table"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_scheduler_in_table_view" ValueChanged="@(isChecked => { _userRole.Role.AUTH_scheduler_in_table_view = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["scheduler_history"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_scheduler_history" ValueChanged="@(isChecked => { _userRole.Role.AUTH_scheduler_history = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["scheduler_past"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_scheduler_edit_past" ValueChanged="@(isChecked => { _userRole.Role.AUTH_scheduler_edit_past = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["scheduler_dayitem"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_scheduler_dayitem" ValueChanged="@(isChecked => { _userRole.Role.AUTH_scheduler_dayitem = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["scheduler_monthitem"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_scheduler_monthitem" ValueChanged="@(isChecked => { _userRole.Role.AUTH_scheduler_monthitem = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["scheduler_other"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_scheduler_other_user" ValueChanged="@(isChecked => { _userRole.Role.AUTH_scheduler_other_user = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["scheduler_description_edit"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_scheduler_description_edit" ValueChanged="@(isChecked => { _userRole.Role.AUTH_scheduler_description_edit = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["scheduler_description_read"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_scheduler_description_read" ValueChanged="@(isChecked => { _userRole.Role.AUTH_scheduler_description_read = isChecked; _saved = null; })"/>
        <MudText Typo="Typo.h6">@L["User"]</MudText>
        <MudSwitch Label="@L["users_details"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_users_details" ValueChanged="@(isChecked => { _userRole.Role.AUTH_users_details = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["users_counter"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_users_counter" ValueChanged="@(isChecked => { _userRole.Role.AUTH_users_counter = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["users_settings"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_users_settigns" ValueChanged="@(isChecked => { _userRole.Role.AUTH_users_settigns = isChecked; _saved = null; })"/>
        <MudText Typo="Typo.h6">@L["Dashboard"]</MudText>
        <MudSwitch Label="@L["full_action_history"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_action_history_full" ValueChanged="@(isChecked => { _userRole.Role.AUTH_action_history_full = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["full_training_history"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_training_history_full" ValueChanged="@(isChecked => { _userRole.Role.AUTH_training_history_full = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["action_search"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_action_search" ValueChanged="@(isChecked => { _userRole.Role.AUTH_action_search = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["action_share"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_action_share" ValueChanged="@(isChecked => { _userRole.Role.AUTH_action_share = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["full_dashboard_statistics"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_dashboard_Statistics" ValueChanged="@(isChecked => { _userRole.Role.AUTH_dashboard_Statistics = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["full_dashboard_statistics_ut"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_dashboard_Statistics_user_tabel" ValueChanged="@(isChecked => { _userRole.Role.AUTH_dashboard_Statistics_user_tabel = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["dashboard_hol"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_dashboard_holidays" ValueChanged="@(isChecked => { _userRole.Role.AUTH_dashboard_holidays = isChecked; _saved = null; })"/>
        <MudSwitch Label="@L["dashboard_qr"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_dashboard_qr" ValueChanged="@(isChecked => { _userRole.Role.AUTH_dashboard_qr = isChecked; _saved = null; })"/>
        <MudText Typo="Typo.h6">@L["Mail"]</MudText>
        <MudSwitch Label="@L["mail_invite_external"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_mail_invite_external" ValueChanged="@(isChecked => { _userRole.Role.AUTH_mail_invite_external = isChecked; _saved = null; })"/>
        <MudText Typo="Typo.h6">@L["PreCom"]</MudText>
        <MudSwitch Label="@L["precom_manual"]" Color="Color.Primary" T="bool" Value="@_userRole.Role.AUTH_precom_manual" ValueChanged="@(isChecked => { _userRole.Role.AUTH_precom_manual = isChecked; _saved = null; })"/>
        <MudButton Color="Color.Primary" OnClick="Submit">
            @LApp["Submit"]
            @switch (_saved)
            {
                case true:
                    <MudIcon Icon="@Icons.Material.Filled.Check"/>
                    break;
                case false:
                    <MudIcon Icon="@Icons.Material.Filled.Close"/>
                    break;
            }
        </MudButton>
    </MudPaper>
    if (_linkedUsers?.LinkedUsers is not null && _users is not null)
    {
        <MudPaper>
            <MudList T="string" ReadOnly="true">
                <MudText Typo="Typo.h5">@L["Users in this role"]</MudText>
                @foreach (var userId in _linkedUsers.LinkedUsers)
                {
                    var userName = _users.FirstOrDefault(x => x.Id == userId)?.Name ?? @LApp["User not found or deleted"];
                    <MudListItem T="string">@userName</MudListItem>
                }
            </MudList>
        </MudPaper>
    }
}
else if (_userRole is null)
{
    <DrogeLoading />
}
