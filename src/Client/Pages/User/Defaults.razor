@page "/user/defaults"
@using Drogecode.Knrm.Oefenrooster.Shared.Enums;
@using Drogecode.Knrm.Oefenrooster.Shared.Models.DefaultSchedule;
<PageTitle>@L["Default schedule"]</PageTitle>

@if (_defaultSchedules is not null)
{
    <MudDataGrid Items="@_defaultSchedules.OrderBy(x=> x.WeekDay).ThenBy(x=>x.TimeStart)"
                 ReadOnly="true" EditMode="@DataGridEditMode.Cell">
        <Columns>
            <HierarchyColumn T="DefaultSchedule" />
            <PropertyColumn Property="x => x.WeekDay" Title="@L["Weekday"]" />
            <PropertyColumn Property="x => x.TimeStart" Title="@L["TimeStart"]" />
            <PropertyColumn Property="x => x.TimeEnd" Title="@L["TimeEnd"]" />
            <PropertyColumn Property="x => x.Available" Title="@L["Current setting"]" />
        </Columns>
        <ChildRowContent>
            <MudCard>
                <MudCardHeader>
                    <CardHeaderContent>
                        <MudText Typo="Typo.h6">@L["Configure your default availabilty here"]</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudCardContent>
                    <MudSelect T="Availabilty?" Variant="Variant.Text" Value="context.Item.Available" SelectedValuesChanged="()=>OnChange(context.Item.Id)" AdornmentColor="@PlannerHelper.ColorAvailabilty(context.Item.Available)">
                        <MudSelectItem T="Availabilty?" Value="Availabilty.None">@LApp["None"]</MudSelectItem>
                        <MudSelectItem T="Availabilty?" Value="Availabilty.Available">@LApp["Available"]</MudSelectItem>
                        <MudSelectItem T="Availabilty?" Value="Availabilty.NotAvailable">@LApp["NotAvailable"]</MudSelectItem>
                        <MudSelectItem T="Availabilty?" Value="Availabilty.Maybe">@LApp["Maybe"]</MudSelectItem>
                    </MudSelect>
                </MudCardContent>
            </MudCard>
        </ChildRowContent>
    </MudDataGrid>
}
else
{
    <MudSkeleton />
    <MudSkeleton />
    <MudSkeleton />
    <MudSkeleton />
}