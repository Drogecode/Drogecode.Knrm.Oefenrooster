@using Drogecode.Knrm.Oefenrooster.Shared.Models.User;
@if (Users is not null && Functions is not null)
{
    <MudSelectExtended T="DrogeUser" MultiSelectionTextFunc="@(new Func<List<DrogeUser>, string>(GetMultiSelectionText))" Label="@L["From who"]" MultiSelection="true" SelectedValues="_selectedUsers" SelectedValuesChanged="OnSelectionChanged">

        @foreach (var function in Functions)
        {
            if (Users.Any(x => x.UserFunctionId == function.Id))
            {
                <MudSelectItemGroupExtended T="DrogeUser" Text="@function.Name" Sticky="true" Nested="false" InitiallyExpanded="false">
                    @foreach (var user in Users.Where(x => x.UserFunctionId == function.Id))
                    {
                        <MudSelectItemExtended T="DrogeUser" Value="@user">@user.Name</MudSelectItemExtended>
                    }
                </MudSelectItemGroupExtended>
            }
        }
    </MudSelectExtended>
}